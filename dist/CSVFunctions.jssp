!function(e,n,t){function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l,u,i,a=o(e),r=o(n),m=o(t),d={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,t,o,l,u,i,a,r="",m=0;for(e=d._utf8_encode(e);m<e.length;)l=(n=e.charCodeAt(m++))>>2,u=(3&n)<<4|(t=e.charCodeAt(m++))>>4,i=(15&t)<<2|(o=e.charCodeAt(m++))>>6,a=63&o,isNaN(t)?i=a=64:isNaN(o)&&(a=64),r=r+this._keyStr.charAt(l)+this._keyStr.charAt(u)+this._keyStr.charAt(i)+this._keyStr.charAt(a);return r},decode:function(e){var n,t,o,l,u,i,a="",r=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r<e.length;)n=this._keyStr.indexOf(e.charAt(r++))<<2|(l=this._keyStr.indexOf(e.charAt(r++)))>>4,t=(15&l)<<4|(u=this._keyStr.indexOf(e.charAt(r++)))>>2,o=(3&u)<<6|(i=this._keyStr.indexOf(e.charAt(r++))),a+=String.fromCharCode(n),64!=u&&(a+=String.fromCharCode(t)),64!=i&&(a+=String.fromCharCode(o));return a=d._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var n="",t=0;t<e.length;t++){var o=e.charCodeAt(t);o<128?n+=String.fromCharCode(o):o>127&&o<2048?(n+=String.fromCharCode(o>>6|192),n+=String.fromCharCode(63&o|128)):(n+=String.fromCharCode(o>>12|224),n+=String.fromCharCode(o>>6&63|128),n+=String.fromCharCode(63&o|128))}return n},_utf8_decode:function(e){for(var n="",t=0,o=0,l=0,u=0;t<e.length;)(o=e.charCodeAt(t))<128?(n+=String.fromCharCode(o),t++):o>191&&o<224?(l=e.charCodeAt(t+1),n+=String.fromCharCode((31&o)<<6|63&l),t+=2):(l=e.charCodeAt(t+1),u=e.charCodeAt(t+2),n+=String.fromCharCode((15&o)<<12|(63&l)<<6|63&u),t+=3);return n}},s="id",c="Name",p="Value",y="SFName",C="SFValue",f="SFCombinedString",g="column1",N="column2",S="column3",h="column4",v="column5",x="column6",b="column7",w="column8",k="column9",V="column10",A="column11",F="column12",R="column13",_="column14",P="column15",I="column16",O="column17",D="column18",j="column19",E="column20",H="column21",U="column22",K="column23",L="column24",T="column25",$="column26",G="column27",J="column28",z="column29",B="column30",W="column31",Z="column32",q="column33",M="column34",Q="column35",X="column36",Y="column37",ee="column38",ne="column39",te="column40",oe="column41",le="column42",ue="column43",ie="column44",ae="column45",re="column46",me="column47",de="column48",se="column49",ce="column50",pe="column51",ye="column52",Ce="column53",fe="column54",ge="column55",Ne="column56",Se="column57",he="column58",ve="column59",xe="column60",be="column61",we={displayName:"Read CSV as JSON",description:"CSV to JSON Object",properties:(l={csv:{displayName:"CSV File",type:"extendedString"}},m.default(l,s,{displayName:"ID",description:"ID",type:"number"}),m.default(l,c,{displayName:"Name",description:"Name",type:"extendedString"}),m.default(l,p,{displayName:"Value",description:"Value",type:"extendedString"}),m.default(l,y,{displayName:"SFName",description:"Name",type:"extendedString"}),m.default(l,C,{displayName:"SFValue",description:"Value",type:"extendedString"}),m.default(l,"SFParentID",{displayName:"SFParentID",description:"ParentID",type:"extendedString"}),m.default(l,f,{displayName:"SFCombinedString",description:"CombinedString",type:"extendedString"}),m.default(l,g,{displayName:"Column 1",description:"Column 1",type:"string"}),m.default(l,N,{displayName:"Column 2",description:"Column 2",type:"string"}),m.default(l,S,{displayName:"Column 3",description:"Column 3",type:"string"}),m.default(l,h,{displayName:"Column 4",description:"Column 4",type:"string"}),m.default(l,v,{displayName:"Column 5",description:"Column 5",type:"string"}),m.default(l,x,{displayName:"Column 6",description:"Column 6",type:"string"}),m.default(l,b,{displayName:"Column 7",description:"Column 7",type:"string"}),m.default(l,w,{displayName:"Column 8",description:"Column 8",type:"string"}),m.default(l,k,{displayName:"Column 9",description:"Column 9",type:"string"}),m.default(l,V,{displayName:"Column 10",description:"Column 10",type:"string"}),m.default(l,A,{displayName:"Column 11",description:"Column 11",type:"string"}),m.default(l,F,{displayName:"Column 12",description:"Column 12",type:"string"}),m.default(l,R,{displayName:"Column 13",description:"Column 13",type:"string"}),m.default(l,_,{displayName:"Column 14",description:"Column 14",type:"string"}),m.default(l,P,{displayName:"Column 15",description:"Column 15",type:"string"}),m.default(l,I,{displayName:"Column 16",description:"Column 16",type:"string"}),m.default(l,O,{displayName:"Column 17",description:"Column 17",type:"string"}),m.default(l,D,{displayName:"Column 18",description:"Column 18",type:"string"}),m.default(l,j,{displayName:"Column 19",description:"Column 19",type:"string"}),m.default(l,E,{displayName:"Column 20",description:"Column 20",type:"string"}),m.default(l,H,{displayName:"Column 21",description:"Column 21",type:"string"}),m.default(l,U,{displayName:"Column 22",description:"Column 22",type:"string"}),m.default(l,K,{displayName:"Column 23",description:"Column 23",type:"string"}),m.default(l,L,{displayName:"Column 24",description:"Column 24",type:"string"}),m.default(l,T,{displayName:"Column 25",description:"Column 25",type:"string"}),m.default(l,$,{displayName:"Column 26",description:"Column 26",type:"string"}),m.default(l,G,{displayName:"Column 27",description:"Column 27",type:"string"}),m.default(l,J,{displayName:"Column 28",description:"Column 28",type:"string"}),m.default(l,z,{displayName:"Column 29",description:"Column 29",type:"string"}),m.default(l,B,{displayName:"Column 30",description:"Column 30",type:"string"}),m.default(l,W,{displayName:"Column 31",description:"Column 31",type:"string"}),m.default(l,Z,{displayName:"Column 32",description:"Column 32",type:"string"}),m.default(l,q,{displayName:"Column 33",description:"Column 33",type:"string"}),m.default(l,M,{displayName:"Column 34",description:"Column 34",type:"string"}),m.default(l,Q,{displayName:"Column 35",description:"Column 35",type:"string"}),m.default(l,X,{displayName:"Column 36",description:"Column 36",type:"string"}),m.default(l,Y,{displayName:"Column 37",description:"Column 37",type:"string"}),m.default(l,ee,{displayName:"Column 38",description:"Column 38",type:"string"}),m.default(l,ne,{displayName:"Column 39",description:"Column 39",type:"string"}),m.default(l,te,{displayName:"Column 40",description:"Column 40",type:"string"}),m.default(l,oe,{displayName:"Column 41",description:"Column 41",type:"string"}),m.default(l,le,{displayName:"Column 42",description:"Column 42",type:"string"}),m.default(l,ue,{displayName:"Column 43",description:"Column 43",type:"string"}),m.default(l,ie,{displayName:"Column 44",description:"Column 44",type:"string"}),m.default(l,ae,{displayName:"Column 45",description:"Column 45",type:"string"}),m.default(l,re,{displayName:"Column 46",description:"Column 46",type:"string"}),m.default(l,me,{displayName:"Column 47",description:"Column 47",type:"string"}),m.default(l,de,{displayName:"Column 48",description:"Column 48",type:"string"}),m.default(l,se,{displayName:"Column 49",description:"Column 49",type:"string"}),m.default(l,ce,{displayName:"Column 50",description:"Column 50",type:"string"}),m.default(l,pe,{displayName:"Column 51",description:"Column 51",type:"string"}),m.default(l,ye,{displayName:"Column 52",description:"Column 52",type:"string"}),m.default(l,Ce,{displayName:"Column 53",description:"Column 53",type:"string"}),m.default(l,fe,{displayName:"Column 54",description:"Column 54",type:"string"}),m.default(l,ge,{displayName:"Column 55",description:"Column 55",type:"string"}),m.default(l,Ne,{displayName:"Column 56",description:"Column 56",type:"string"}),m.default(l,Se,{displayName:"Column 57",description:"Column 57",type:"string"}),m.default(l,he,{displayName:"Column 58",description:"Column 58",type:"string"}),m.default(l,ve,{displayName:"Column 59",description:"Column 59",type:"string"}),m.default(l,xe,{displayName:"Column 60",description:"Column 60",type:"string"}),m.default(l,be,{displayName:"Column 61",description:"Column 61",type:"string"}),m.default(l,"ColumnName",{displayName:"Column Index",description:"Column Index",type:"string"}),m.default(l,"output",{displayName:"Output",type:"extendedString"}),l),methods:{readCSV:{displayName:"Read CSV",type:"list",inputs:["csv"],outputs:[s,g,N,S,h,v,x,b,w,k,V,A,F,R,_,P,I,O,D,j,E,H,U,K,L,T,$,G,J,z,B,W,Z,q,M,Q,X,Y,ee,ne,te,oe,le,ue,ie,ae,re,me,de,se,ce,pe,ye,Ce,fe,ge,Ne,Se,he,ve,xe,be]},readCsvRow:{displayName:"Get a Row from CSV File",type:"read",inputs:["csv","id"],outputs:["id","column1","column2","column3","column4","column5","column6","column7","column8","column9","column10","column11","column12","column13","column14","column15","column16","column17","column18","column19","column20","column21","column22","column23","column24","column25","column26","column27","column28","column29","column30","column31","column32","column33","column34","column35","column36","column37","column38","column39","column40","column41","column42","column43","column44","column45","column46","column47","column48","column49","column50","column51","column52","column53","column54","column55","column56","column57","column58","column59","column60","column61"]},listHeaders:{displayName:"List Headers from CSV",type:"list",inputs:["csv","id"],outputs:[s,c,p]},readRowHeaders:{displayName:"Read Header row from CSV",type:"read",inputs:["csv","id"],outputs:[s,c,p]},combineString:{displayName:"Combine Strings for BULK API Upload",type:"read",inputs:["SFParentID","SFValue","SFName"],outputs:[f]}}};function ke(e,n,t,o){return Ve.apply(this,arguments)}function Ve(){return(Ve=r.default(a.default.mark((function e(n,t,o,l){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="readCSV"===e.t0?3:"readCsvRow"===e.t0?6:"listHeaders"===e.t0?9:"combineString"===e.t0?12:15;break;case 3:return e.next=5,Re(t);case 5:return e.abrupt("break",16);case 6:return e.next=8,Pe(o,t);case 8:return e.abrupt("break",16);case 9:return e.next=11,_e(o,t);case 11:return e.abrupt("break",16);case 12:return e.next=14,Fe(o,t);case 14:return e.abrupt("break",16);case 15:throw new Error("The method "+n+" is not supported.");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return e.split("<content>")[1].split("</content>")[0]}function Fe(e,n,t){return new Promise((function(e,t){console.log("executed");for(var o="",l=n.SFName.toString(),u=n.SFValue.toString(),i=l.split(","),a=u.split(","),r=0;r<i.length;r++)o+=n.SFParentID+","+i[r]+","+a[r]+"\n";postResult({SFCombinedString:o}),e()}))}function Re(e,n){return new Promise((function(n,t){try{var o=d.decode(Ae(e.csv.toString())).split("\n"),l=new RegExp('"',"g"),u=0,i=o.map((function(e){var n={};u+=1;var t=e.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);n.id=u;for(var o=0;o<t.length;o++)o+1<61&&(n["column"+(o+1)]=t[o].replace(l,""));return n}));postResult(i),n()}catch(e){t(e)}}))}function _e(e,n,t){return new Promise((function(e,t){try{var o,l=d.decode(Ae(n.csv.toString())),u=new RegExp('"',"g"),i=+n.id,a=(o=l.split(/\r?\n/))[0],r=o[i-1],m={},s=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);m=a.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map((function(e){var n={};return n.Name=e,n}));for(var c=0;c<s.length;c++)c+1<61&&(m[c].id=c+1,m[c].Value=s[c].replace(u,""));postResult(m),e()}catch(e){t(e)}}))}function Pe(e,n,t){return new Promise((function(e,t){try{var o=d.decode(Ae(n.csv.toString())),l=new RegExp('"',"g"),u=+n.id,i=o.split(/\r?\n/)[u-1],a={},r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);a.id=u;for(var m=0;m<r.length;m++)m+1<61&&(a["column"+(m+1)]=r[m].replace(l,""));postResult(a),e()}catch(e){t(e)}}))}metadata={systemName:"ReadCSVasK2Object",displayName:"Read CSV in K2",description:"A Utility broker using CSV in K2 Workflows",configuration:{ServiceURL:{displayName:"Service URL",type:"string",value:"https://www.cloudfunctions.net"}}},ondescribe=(u=r.default(a.default.mark((function e(n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.configuration,postSchema({objects:{csvFunctions:we}});case 2:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)}),onexecute=(i=r.default(a.default.mark((function e(n){var t,o,l,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.objectName,o=n.methodName,l=n.parameters,u=n.properties,i=n.configuration,e.t0=t,e.next="csvFunctions"===e.t0?4:7;break;case 4:return e.next=6,ke(o,u,l,i);case 6:return e.abrupt("break",8);case 7:throw new Error("The object "+t+" is not supported.");case 8:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}(_regeneratorRuntime,_asyncToGenerator,_defineProperty);
//# sourceMappingURL=CSVFunctions.jssp.map
